const carousel=[...document.querySelectorAll(".carousel img")];let carouselImageIndex=0;const changeCarousel=()=>{carousel[carouselImageIndex].classList.toggle("active"),carouselImageIndex>=carousel.length-1?carouselImageIndex=0:carouselImageIndex++,carousel[carouselImageIndex].classList.toggle("active")};setInterval(()=>{changeCarousel()},3e3);const musicPlayerSection=document.querySelector(".music-player-section");let clickCount=1;musicPlayerSection.addEventListener("click",()=>{if(clickCount>=2)return musicPlayerSection.classList.add("active"),void(clickCount=1);clickCount++,setTimeout(()=>{clickCount=1},250)});const backToHomeBtn=document.querySelector(".music-player-section .back-btn");backToHomeBtn.addEventListener("click",()=>{musicPlayerSection.classList.remove("active")});const playlistSection=document.querySelector(".playlist"),navBtn=document.querySelector(".music-player-section .nav-btn");navBtn.addEventListener("click",()=>{playlistSection.classList.add("active")});const backToMusicPlayer=document.querySelector(".playlist .back-btn");backToMusicPlayer.addEventListener("click",()=>{playlistSection.classList.remove("active")});let currentMusic=0;const music=document.querySelector("#audio-source"),seekBar=document.querySelector(".music-seek-bar"),songName=document.querySelector(".current-song-name"),artistName=document.querySelector(".artist-name"),coverImage=document.querySelector(".cover"),currentMusicTime=document.querySelector(".current-time"),musicDuration=document.querySelector(".duration"),queue=[...document.querySelectorAll(".queue")],forwardBtn=document.querySelector("i.fa-forward"),backwardBtn=document.querySelector("i.fa-backward"),pauseBtn=document.querySelector("i.fa-pause"),playBtn=document.querySelector("i.fa-play"),redoBtn=document.querySelector(".fa-redo"),volumeBtn=document.querySelector(".fa-volume-up"),volumeSlider=document.querySelector(".volume-slider");playBtn.addEventListener("click",()=>{music.play(),playBtn.classList.remove("active"),pauseBtn.classList.add("active")}),pauseBtn.addEventListener("click",()=>{music.pause(),pauseBtn.classList.remove("active"),playBtn.classList.add("active")});const setMusic=e=>{seekBar.value=0;let c=songs[e];currentMusic=e,music.src=c.path,songName.innerHTML=c.name,artistName.innerHTML=c.artist,coverImage.src=c.cover,setTimeout(()=>{seekBar.max=music.duration,musicDuration.innerHTML=formatTime(music.duration)},300),currentMusicTime.innerHTML="00 : 00",queue.forEach(e=>e.classList.remove("active")),queue[currentMusic].classList.add("active")};setMusic(0);const formatTime=e=>{let c=Math.floor(e/60);c<10&&(c="0"+c);let t=Math.floor(e%60);return t<10&&(t="0"+t),`${c} : ${t}`};setInterval(()=>{seekBar.value=music.currentTime,currentMusicTime.innerHTML=formatTime(music.currentTime),Math.floor(music.currentTime)==Math.floor(seekBar.max)&&(redoBtn.className.includes("active")?(setMusic(currentMusic),playBtn.click()):forwardBtn.click())},500),seekBar.addEventListener("change",()=>{music.currentTime=seekBar.value}),forwardBtn.addEventListener("click",()=>{currentMusic>=songs.length-1?currentMusic=0:currentMusic++,setMusic(currentMusic),playBtn.click()}),backwardBtn.addEventListener("click",()=>{currentMusic<=0?currentMusic=songs.length-1:currentMusic--,setMusic(currentMusic),playBtn.click()}),redoBtn.addEventListener("click",()=>{redoBtn.classList.toggle("active")}),volumeBtn.addEventListener("click",()=>{volumeBtn.classList.toggle("active"),volumeSlider.classList.toggle("active")}),volumeSlider.addEventListener("input",()=>{music.volume=volumeSlider.value}),queue.forEach((e,c)=>{e.addEventListener("click",()=>{setMusic(c),playBtn.click()})});